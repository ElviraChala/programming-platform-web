<div *ngIf="student && questions.length > 0" class="container">
  <h1>–¢–µ—Å—Ç –¥–æ —É—Ä–æ–∫—É üìö</h1>

  <!-- –ù–∞–≤—ñ–≥–∞—Ü—ñ—è –ø–æ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è—Ö -->
  <div *ngIf="!showResults && currentQuestionIndex < questions.length" class="navigation-panel">
    <div class="question-buttons">
      <button
        *ngFor="let question of questions; let i = index"
        [class.current]="i === currentQuestionIndex"
        [class.answered]="isAnswers[i]"
        [class.unanswered]="!isAnswers[i]"
        (click)="goToQuestion(i)">
        {{ i + 1 }}
      </button>
    </div>
  </div>

  <!-- –ü–æ—Ç–æ—á–Ω–µ –ø–∏—Ç–∞–Ω–Ω—è -->
  <div *ngIf="!showResults && currentQuestionIndex < questions.length" class="question-container">
    <h2>–ó–∞–ø–∏—Ç–∞–Ω–Ω—è {{ currentQuestionIndex + 1 }}:</h2>

    <app-question
      [idQuestion]="currentQuestionId"
      [(ngModel)]="currentAnswer">
    </app-question>

    <button
      (click)="getAnswer()"
      [disabled]="!currentAnswer.trim()">
      {{ currentQuestionIndex + 1 === questions.length ? '–ó–∞–≤–µ—Ä—à–∏—Ç–∏' : '–í—ñ–¥–ø–æ–≤—ñ—Å—Ç–∏' }}
    </button>
  </div>

  <!-- –ó–∞–≤–µ—Ä—à–µ–Ω–Ω—è —Ç–µ—Å—Ç—É -->
  <div *ngIf="!showResults && currentQuestionIndex >= questions.length" class="test-completion">
    <h2>–¢–µ—Å—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–æ!</h2>
    <button (click)="submitAnswers()">–ù–∞–¥—ñ—Å–ª–∞—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ</button>
  </div>

  <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ -->
  <div *ngIf="showResults" class="result-container result-with-bg">
    <h2>–í–∞—à —Ä–µ–∑—É–ª—å—Ç–∞—Ç: {{ resultScore | number:'1.2-2' }}</h2>
    <p class="feedback-message">{{ feedbackMessage }}</p>
    <button
      (click)="goBackToLesson()"
      class="go-to-course">
      –ü–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—å –¥–æ –∫—É—Ä—Å—É
    </button>

    <button
      (click)="goToCodingTasks()"
      class="go-to-coding">
      –ü–µ—Ä–µ–π—Ç–∏ –¥–æ –ø—Ä–∞–∫—Ç–∏—á–Ω–∏—Ö –∑–∞–≤–¥–∞–Ω—å üíª
    </button>
    <img src="/img-result.png" alt="Result Illustration">

  </div>
</div>
