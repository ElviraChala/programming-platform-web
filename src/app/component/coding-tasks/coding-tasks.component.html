<div *ngIf="taskLoaded && task" class="coding-task-page">
  <h1>–ü—Ä–∞–∫—Ç–∏—á–Ω—ñ –∑–∞–≤–¥–∞–Ω–Ω—è üìù</h1>

  <!-- –ù–∞–≤—ñ–≥–∞—Ü—ñ—è –ø–æ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è—Ö -->
  <div *ngIf="taskIds.length > 0" class="navigation-panel">
    <div class="question-buttons">
      <button class="answer-options"
              *ngFor="let id of taskIds; let i = index"
              [class.current]="i === currentTaskId"
              [class.answered]="isTaskCompleted[i]"
              [class.unanswered]="!isTaskCompleted[i]"
              (click)="goToTask(i)">
        {{ i + 1 }}
      </button>
    </div>
  </div>

  <div class="task-layout">
    <!-- –õ—ñ–≤–∞ –ø–∞–Ω–µ–ª—å: –æ–ø–∏—Å –∑–∞–≤–¥–∞–Ω–Ω—è -->
    <div class="task-description">
      <h2>–ó–∞–≤–¥–∞–Ω–Ω—è: {{ task.title }}</h2>
      <p [innerHTML]="task.description"></p>

      <h3>–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:</h3>
      <pre><code>{{ task.expectedOutput }}</code></pre>


    </div>

    <!-- –ü—Ä–∞–≤–∞ –ø–∞–Ω–µ–ª—å: –ø–æ–ª–µ –¥–ª—è –∫–æ–¥—É -->
    <div class="code-editor">
      <div class="editor-header">
        <label for="language">–ú–æ–≤–∞:</label>
        <select id="language" disabled>
          <option selected>Java</option>
        </select>
        <button class="run-btn" (click)="runCode()">‚ñ∂ –ó–∞–ø—É—Å—Ç–∏—Ç–∏</button>
      </div>

      <textarea [(ngModel)]="code" placeholder="// –ù–∞–ø–∏—à–∏ —Å–≤—ñ–π –∫–æ–¥ —Ç—É—Ç..." rows="12"></textarea>

      <div class="output-block">
        <h4>–†–µ–∑—É–ª—å—Ç–∞—Ç:</h4>
        <pre class="output">{{ output }}</pre>
      </div>
    </div>
  </div>
</div>

<!-- –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∞–±–æ –≤—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å –∑–∞–≤–¥–∞–Ω—å -->
<div *ngIf="!taskLoaded">
  <p class="error-message">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∞–±–æ –ø–æ–º–∏–ª–∫–∞...</p>
</div>

<!-- –ù–∞–≤—ñ–≥–∞—Ü—ñ–π–Ω–∏–π –±–ª–æ–∫ -->
<div *ngIf="taskLoaded && task" class="navigation-buttons">
  <button (click)="goBackToLesson()" class="lesson-button link-button">
    –ü–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—å –¥–æ —Ç–µ–æ—Ä—ñ—ó
  </button>

  <button *ngIf="lesson?.checkKnowledgeId"
          (click)="goToLessonTest()"
          class="lesson-button link-button">
    –ü–µ—Ä–µ–π—Ç–∏ –¥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è
  </button>

  <!-- –ö–Ω–æ–ø–∫–∞ –¥–æ –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ —É—Ä–æ–∫—É –∞–±–æ –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –¥–æ –∫—É—Ä—Å—ñ–≤ -->
  <button *ngIf="isTaskCompleted && isCheckKnowledgeCompleted && nextLesson"
          (click)="goToNextLesson()"
          class="lesson-button link-button next-lesson-button">
    –ü–µ—Ä–µ–π—Ç–∏ –¥–æ –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ —É—Ä–æ–∫—É
  </button>

  <!-- –ó–≤–∏—á–∞–π–Ω–∞ –∫–Ω–æ–ø–∫–∞ –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –¥–æ –∫—É—Ä—Å—ñ–≤, —è–∫—â–æ –∑–∞–≤–¥–∞–Ω–Ω—è –Ω–µ –≤–∏–∫–æ–Ω–∞–Ω—ñ -->
  <button *ngIf="!(isTaskCompleted && isCheckKnowledgeCompleted)"
          (click)="goToCourseList()"
          class="lesson-button link-button course-list-button">
    –ü–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ —Å–ø–∏—Å–∫—É –∫—É—Ä—Å—ñ–≤
  </button>
</div>
